---
title: JVM详情
tags:
---
JVM
类装载子系统      运行时数据区（内存模型）        字节码执行引擎

运行时数据区：
堆：一般new出来的对象都放在堆中
    年轻代- 1/3：
        伊甸园区(Eden)- 8：new出来的都先放在这里
        幸存者区(Survivor)- 2：伊甸园满后，字节码执行引擎专开一个线程minor gc进行垃圾回收
            （可达性分析算法：通过GC root根查找链引用，根据变量挨个查找引用链，找不到的都是垃圾对象，找到的放到幸存者区并且分代年龄+1）
            （分代年龄：对象组成中的对象头中存储的）
            From- 1：
            To- 1：
            （from to 两个区域回收幸存会移来移去分代年龄不断+1,+到15次（老不死变量）就会移到老年代）
    老年代- 2/3：
         GC 会STW-Stop The World
        （老年代满, full gc做一次完整的清理，全部进行一次垃圾回收）
    
栈（线程）：一个线程一个分开的单独的专属栈内存空间
    （FILO:先进后出的栈数据结构符合方法的嵌套调用创建释放的顺序模式）
    栈帧：线程栈中，一个方法对应一个用于放自己方法局部变量的独立内存区域
        局部变量表：存放方法内局部变量或真实对象的内存地址引用
        操作数栈：程序操作数值进行运算的临时存储栈内存空间
        动态链接：
        方法出口：记录方法完成应该回到上层方法的哪个位置
程序计数器：一个线程分配一个程序计数器，由字节码执行引擎操作用来记录程序`正在即将`运行到哪个位置的内存地址
    （为了多线程CPU切换恢复线程记录线程需要继续从哪里开始运行）
方法区（元空间）：存放常量+静态变量+类信息
    （类装载子系统将类相关信息存放在这个区域供字节码执行引擎调用执行）
本地方法栈：存放执行系统本地非java方法的地址空间
    （native修饰的方法）